<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= customer ? 'Edit Customer' : 'New Customer' %> - SKD Systems</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: #f5f5f5;
        }
        .navbar {
            background: white;
            padding: 15px 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .navbar h1 {
            color: #667eea;
            font-size: 24px;
        }
        .back-link {
            color: #667eea;
            text-decoration: none;
            font-weight: 500;
        }
        .container {
            max-width: 800px;
            margin: 30px auto;
            padding: 0 20px;
        }
        .form-card {
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .form-card h2 {
            color: #333;
            font-size: 24px;
            margin-bottom: 30px;
        }
        .section-title {
            color: #667eea;
            font-size: 18px;
            font-weight: 600;
            margin: 30px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #e1e1e1;
        }
        .section-title:first-of-type {
            margin-top: 0;
        }
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group.full-width {
            grid-column: 1 / -1;
        }
        label {
            display: block;
            color: #333;
            font-weight: 500;
            margin-bottom: 8px;
            font-size: 14px;
        }
        label .required {
            color: #f44336;
        }
        input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e1e1;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
            font-family: inherit;
        }
        input:focus {
            outline: none;
            border-color: #667eea;
        }
        input[type="number"] {
            -moz-appearance: textfield;
        }
        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .form-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            padding-top: 30px;
            border-top: 1px solid #e1e1e1;
        }
        .btn {
            padding: 12px 32px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: transform 0.2s;
        }
        .btn:hover {
            transform: translateY(-2px);
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .btn-secondary {
            background: #e1e1e1;
            color: #333;
        }
        .help-text {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        .alert-error {
            background: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            border-left: 4px solid #c62828;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <h1>SKD Systems Dashboard</h1>
        <a href="/manage" class="back-link">‚Üê Back to Management</a>
    </nav>

    <div class="container">
        <div class="form-card">
            <h2><%= customer ? 'Edit Customer' : 'Add New Customer' %></h2>
            
            <% if (error) { %>
                <div class="alert-error"><%= error %></div>
            <% } %>

            <form method="POST" action="<%= customer ? '/customer/' + customer.id + '/update' : '/customer/create' %>">
                <div class="section-title">Customer Information</div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="customer_name">
                            Customer Name <span class="required">*</span>
                        </label>
                        <input 
                            type="text" 
                            id="customer_name" 
                            name="customer_name" 
                            value="<%= customer ? customer.customer_name : '' %>"
                            required
                        >
                    </div>

                    <div class="form-group">
                        <label for="company_name">Company Name</label>
                        <input 
                            type="text" 
                            id="company_name" 
                            name="company_name" 
                            value="<%= customer ? (customer.company_name || '') : '' %>"
                        >
                    </div>
                </div>

                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input 
                        type="email" 
                        id="email" 
                        name="email" 
                        value="<%= customer ? (customer.email || '') : '' %>"
                    >
                    <div class="help-text">Must be unique for each customer</div>
                </div>

                <div class="section-title">Hours Management</div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="hours_purchased">Hours Purchased</label>
                        <input 
                            type="number" 
                            id="hours_purchased" 
                            name="hours_purchased" 
                            step="0.01"
                            min="0"
                            value="<%= customer ? customer.hours_purchased : '0' %>"
                        >
                    </div>

                    <div class="form-group">
                        <label for="hours_used">Hours Used</label>
                        <input 
                            type="number" 
                            id="hours_used" 
                            name="hours_used" 
                            step="0.01"
                            min="0"
                            value="<%= customer ? customer.hours_used : '0' %>"
                        >
                    </div>
                </div>

                <div class="section-title">Infrastructure Statistics</div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="server_count">Server Count</label>
                        <input 
                            type="number" 
                            id="server_count" 
                            name="server_count" 
                            min="0"
                            value="<%= customer ? (customer.server_count || 0) : '0' %>"
                        >
                    </div>

                    <div class="form-group">
                        <label for="active_services">Active Services</label>
                        <input 
                            type="number" 
                            id="active_services" 
                            name="active_services" 
                            min="0"
                            value="<%= customer ? (customer.active_services || 0) : '0' %>"
                        >
                    </div>

                    <div class="form-group">
                        <label for="storage_gb">Storage (GB)</label>
                        <input 
                            type="number" 
                            id="storage_gb" 
                            name="storage_gb" 
                            step="0.01"
                            min="0"
                            value="<%= customer ? (customer.storage_gb || 0) : '0' %>"
                        >
                    </div>

                    <div class="form-group">
                        <label for="bandwidth_gb">Bandwidth (GB)</label>
                        <input 
                            type="number" 
                            id="bandwidth_gb" 
                            name="bandwidth_gb" 
                            step="0.01"
                            min="0"
                            value="<%= customer ? (customer.bandwidth_gb || 0) : '0' %>"
                        >
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <%= customer ? 'Update Customer' : 'Create Customer' %>
                    </button>
                    <a href="/manage" class="btn btn-secondary">Cancel</a>
                </div>
            </form>
        </div>
    </div>
</body>
</html>

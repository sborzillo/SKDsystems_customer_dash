<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= customer ? 'Edit Customer' : 'New Customer' %> - SKD Systems</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif; background: #f8fafc; }
        .navbar { position: sticky; top: 0; z-index: 40; background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); padding: 12px 0; border-bottom: 1px solid #e2e8f0; }
        .navbar-content { max-width: 800px; margin: 0 auto; padding: 0 24px; display: flex; justify-content: space-between; align-items: center; }
        .navbar h1 { font-size: 20px; font-weight: 600; letter-spacing: -0.025em; color: #0f172a; }
        .gradient-text { background: linear-gradient(90deg, #E6282A, #FFA3A5); -webkit-background-clip: text; background-clip: text; color: transparent; }
        .back-link { color: #0f172a; text-decoration: none; font-weight: 500; padding: 8px 16px; border-radius: 8px; transition: all 0.2s; font-size: 14px; }
        .back-link:hover { background: #f1f5f9; }
        .container { max-width: 800px; margin: 32px auto; padding: 0 24px; }
        .form-card { background: white; padding: 40px; border-radius: 16px; box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1); border: 1px solid #e2e8f0; }
        .form-card h2 { color: #0f172a; font-size: 24px; font-weight: 600; letter-spacing: -0.025em; margin-bottom: 30px; }
        .section-title { color: #E6282A; font-size: 18px; font-weight: 600; margin: 30px 0 20px 0; padding-bottom: 10px; border-bottom: 2px solid #e2e8f0; }
        .section-title:first-of-type { margin-top: 0; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .form-group { margin-bottom: 20px; }
        .form-group.full-width { grid-column: 1 / -1; }
        label { display: block; color: #334155; font-weight: 500; margin-bottom: 8px; font-size: 14px; }
        label .required { color: #ef4444; }
        input { width: 100%; padding: 12px 16px; border: 1px solid #cbd5e1; border-radius: 12px; font-size: 14px; transition: all 0.2s; font-family: inherit; background: white; }
        input:focus { outline: none; border-color: #E6282A; box-shadow: 0 0 0 3px rgba(230, 40, 42, 0.1); }
        .form-actions { display: flex; gap: 12px; margin-top: 30px; padding-top: 30px; border-top: 1px solid #e2e8f0; }
        .btn { padding: 12px 32px; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; text-decoration: none; display: inline-block; transition: all 0.2s; }
        .btn-primary { background: linear-gradient(90deg, #E6282A, #FFA3A5); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(230, 40, 42, 0.3); }
        .btn-secondary { background: #e2e8f0; color: #334155; }
        .btn-secondary:hover { background: #cbd5e1; }
        .help-text { font-size: 12px; color: #64748b; margin-top: 5px; }
        .alert-error { background: #fee2e2; color: #991b1b; padding: 16px; border-radius: 12px; margin-bottom: 20px; border-left: 4px solid #991b1b; font-size: 14px; }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-content">
            <h1><span class="gradient-text">SKD</span>Systems Dashboard</h1>
            <a href="/manage" class="back-link">‚Üê Back to Management</a>
        </div>
    </nav>

    <div class="container">
        <div class="form-card">
            <h2><%= customer ? 'Edit Customer' : 'Add New Customer' %></h2>
            
            <% if (error) { %>
                <div class="alert-error"><%= error %></div>
            <% } %>

            <form method="POST" action="<%= customer ? '/customer/' + customer.id + '/update' : '/customer/create' %>">
                <div class="section-title">Customer Information</div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="customer_name">Customer Name <span class="required">*</span></label>
                        <input type="text" id="customer_name" name="customer_name" value="<%= customer ? customer.customer_name : '' %>" required>
                    </div>
                    <div class="form-group">
                        <label for="company_name">Company Name</label>
                        <input type="text" id="company_name" name="company_name" value="<%= customer ? (customer.company_name || '') : '' %>">
                    </div>
                </div>

                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" value="<%= customer ? (customer.email || '') : '' %>">
                    <div class="help-text">Must be unique for each customer</div>
                </div>

                <div class="section-title">Hours Management</div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="hours_purchased">Hours Purchased</label>
                        <input type="number" id="hours_purchased" name="hours_purchased" step="0.01" min="0" value="<%= customer ? customer.hours_purchased : '0' %>">
                    </div>
                    <div class="form-group">
                        <label for="hours_used">Hours Used</label>
                        <input type="number" id="hours_used" name="hours_used" step="0.01" min="0" value="<%= customer ? customer.hours_used : '0' %>">
                    </div>
                </div>

                <div class="section-title">Infrastructure Statistics</div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="server_count">Server Count</label>
                        <input type="number" id="server_count" name="server_count" min="0" value="<%= customer ? (customer.server_count || 0) : '0' %>">
                    </div>
                    <div class="form-group">
                        <label for="active_services">Active Services</label>
                        <input type="number" id="active_services" name="active_services" min="0" value="<%= customer ? (customer.active_services || 0) : '0' %>">
                    </div>
                    <div class="form-group">
                        <label for="storage_gb">Storage (GB)</label>
                        <input type="number" id="storage_gb" name="storage_gb" step="0.01" min="0" value="<%= customer ? (customer.storage_gb || 0) : '0' %>">
                    </div>
                    <div class="form-group">
                        <label for="bandwidth_gb">Bandwidth (GB)</label>
                        <input type="number" id="bandwidth_gb" name="bandwidth_gb" step="0.01" min="0" value="<%= customer ? (customer.bandwidth_gb || 0) : '0' %>">
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary"><%= customer ? 'Update Customer' : 'Create Customer' %></button>
                    <a href="/manage" class="btn btn-secondary">Cancel</a>
                </div>
            </form>
        </div>
    </div>
</body>
</html>